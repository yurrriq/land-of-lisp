% -*- mode: noweb; ess-noweb-default-code-mode: lisp-mode; -*-% ===> this file was generated automatically by noweave --- better not edit it
\documentclass{tufte-handout}
\usepackage{noweb}

\usepackage{color}
% https://commons.wikimedia.org/wiki/File:Erlang_logo.svg
\definecolor{ErlangRed}{HTML}{A90533}

\usepackage{hyperref}
\hypersetup{
  bookmarks=true,
  pdffitwindow=true,
  pdfstartview={FitH},
  pdftitle={The Guess-My-Number Game},
  pdfauthor={Eric Bailey <eric@ericb.me>},
  pdfsubject={Land of Lisp: Chapter 2},
  pdfkeywords={Lisp, game, simple, literate programming, noweb},
  colorlinks=true,
  linkcolor=ErlangRed,
  urlcolor=ErlangRed
}

\usepackage{amsmath}
\usepackage{amssymb}

\usepackage[outputdir=src/lol]{minted}

% NOTE: Use Tufte instead of noweb page style.
% \pagestyle{noweb}
% NOTE: Use shift option for wide code.
\noweboptions{smallcode,shortxref,webnumbering,english}

\title{
  The Guess-My-Number Game
  \thanks{
    From Chapter 2 of \href{http://landoflisp.com}{\sl Land of Lisp}.
  }
}

\author{Eric Bailey}

% \date{January 14, 2017}

\newcommand{\stylehook}{\marginpar{\raggedright\sl Style hook}}

\newmintinline[lsp]{lisp}{}

\begin{document}
\maketitle
\nwfilename{src/lol/guess.nw}\nwbegindocs{1}\nwdocspar

\begin{abstract}
  In this game, you pick a number from $1$ to $100$, and the computer has to
  guess it.
\end{abstract}

% \tableofcontents
% \newpage

\section{Outline}
\nwenddocs{}\nwbegincode{2}\sublabel{NW2gPxqo-4LQmoZ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW2gPxqo-4LQmoZ-1}}}\moddef{guess~{\nwtagstyle{}\subpageref{NW2gPxqo-4LQmoZ-1}}}\endmoddef\nwstartdeflinemarkup\nwenddeflinemarkup
\LA{}(Re)set the global state~{\nwtagstyle{}\subpageref{NW2gPxqo-355GfG-1}}\RA{}

\LA{}Define the guess-my-number function~{\nwtagstyle{}\subpageref{NW2gPxqo-2dH98J-1}}\RA{}

\LA{}Define the smaller function~{\nwtagstyle{}\subpageref{NW2gPxqo-XVmzj-1}}\RA{}

\LA{}Define the bigger function~{\nwtagstyle{}\subpageref{NW2gPxqo-3IGZXZ-1}}\RA{}

\LA{}Define the start-over function~{\nwtagstyle{}\subpageref{NW2gPxqo-4DZzHV-1}}\RA{}
\nwnotused{guess}\nwendcode{}\nwbegindocs{3}\nwdocspar

\section{Defining the Small and Big Variables}
\label{sec:top-level-defs}

\nwenddocs{}\nwbegincode{4}\sublabel{NW2gPxqo-355GfG-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW2gPxqo-355GfG-1}}}\moddef{(Re)set the global state~{\nwtagstyle{}\subpageref{NW2gPxqo-355GfG-1}}}\endmoddef\nwstartdeflinemarkup\nwusesondefline{\\{NW2gPxqo-4LQmoZ-1}}\nwenddeflinemarkup
(defparameter *small* 1)
(defparameter *big* 100)
\nwused{\\{NW2gPxqo-4LQmoZ-1}}\nwendcode{}\nwbegindocs{5}\nwdocspar

\section{Defining the Guess-My-Number Function}
\label{sec:guess-my-number}

\nwenddocs{}\nwbegincode{6}\sublabel{NW2gPxqo-2dH98J-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW2gPxqo-2dH98J-1}}}\moddef{Define the guess-my-number function~{\nwtagstyle{}\subpageref{NW2gPxqo-2dH98J-1}}}\endmoddef\nwstartdeflinemarkup\nwusesondefline{\\{NW2gPxqo-4LQmoZ-1}}\nwenddeflinemarkup
(defun guess-my-number ()
  \LA{}Halve the sum of the limits and shorten the result~{\nwtagstyle{}\subpageref{NW2gPxqo-3A9QGg-1}}\RA{})
\nwused{\\{NW2gPxqo-4LQmoZ-1}}\nwendcode{}\nwbegindocs{7}\nwdocspar

\nwenddocs{}\nwbegincode{8}\sublabel{NW2gPxqo-3A9QGg-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW2gPxqo-3A9QGg-1}}}\moddef{Halve the sum of the limits and shorten the result~{\nwtagstyle{}\subpageref{NW2gPxqo-3A9QGg-1}}}\endmoddef\nwstartdeflinemarkup\nwusesondefline{\\{NW2gPxqo-2dH98J-1}}\nwenddeflinemarkup
(ash (+ *small* *big*) -1)
\nwused{\\{NW2gPxqo-2dH98J-1}}\nwendcode{}\nwbegindocs{9}\nwdocspar

\nwenddocs{}\nwbegincode{10}\sublabel{NW2gPxqo-2K5nJA-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW2gPxqo-2K5nJA-1}}}\moddef{Have the computer guess a number~{\nwtagstyle{}\subpageref{NW2gPxqo-2K5nJA-1}}}\endmoddef\nwstartdeflinemarkup\nwusesondefline{\\{NW2gPxqo-XVmzj-1}\\{NW2gPxqo-5JtNW-1}\\{NW2gPxqo-3IGZXZ-1}\\{NW2gPxqo-1uzkcU-1}\\{NW2gPxqo-4DZzHV-1}}\nwenddeflinemarkup
(guess-my-number)
\nwused{\\{NW2gPxqo-XVmzj-1}\\{NW2gPxqo-5JtNW-1}\\{NW2gPxqo-3IGZXZ-1}\\{NW2gPxqo-1uzkcU-1}\\{NW2gPxqo-4DZzHV-1}}\nwendcode{}\nwbegindocs{11}\nwdocspar

\section{Defining the Smaller and Bigger Functions}

\nwenddocs{}\nwbegincode{12}\sublabel{NW2gPxqo-XVmzj-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW2gPxqo-XVmzj-1}}}\moddef{Define the smaller function~{\nwtagstyle{}\subpageref{NW2gPxqo-XVmzj-1}}}\endmoddef\nwstartdeflinemarkup\nwusesondefline{\\{NW2gPxqo-4LQmoZ-1}}\nwenddeflinemarkup
(defun smaller ()
  \LA{}Set *big* to one less than the last guess~{\nwtagstyle{}\subpageref{NW2gPxqo-1mRqYq-1}}\RA{}
  \LA{}Have the computer guess a number~{\nwtagstyle{}\subpageref{NW2gPxqo-2K5nJA-1}}\RA{})
\nwused{\\{NW2gPxqo-4LQmoZ-1}}\nwendcode{}\nwbegindocs{13}\nwdocspar

\nwenddocs{}\nwbegincode{14}\sublabel{NW2gPxqo-1mRqYq-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW2gPxqo-1mRqYq-1}}}\moddef{Set *big* to one less than the last guess~{\nwtagstyle{}\subpageref{NW2gPxqo-1mRqYq-1}}}\endmoddef\nwstartdeflinemarkup\nwusesondefline{\\{NW2gPxqo-XVmzj-1}}\nwenddeflinemarkup
(setf *big* \LA{}Subtract one from the most recent guess~{\nwtagstyle{}\subpageref{NW2gPxqo-5JtNW-1}}\RA{})
\nwused{\\{NW2gPxqo-XVmzj-1}}\nwendcode{}\nwbegindocs{15}\nwdocspar

\nwenddocs{}\nwbegincode{16}\sublabel{NW2gPxqo-5JtNW-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW2gPxqo-5JtNW-1}}}\moddef{Subtract one from the most recent guess~{\nwtagstyle{}\subpageref{NW2gPxqo-5JtNW-1}}}\endmoddef\nwstartdeflinemarkup\nwusesondefline{\\{NW2gPxqo-1mRqYq-1}}\nwenddeflinemarkup
(1- \LA{}Have the computer guess a number~{\nwtagstyle{}\subpageref{NW2gPxqo-2K5nJA-1}}\RA{})
\nwused{\\{NW2gPxqo-1mRqYq-1}}\nwendcode{}\nwbegindocs{17}\nwdocspar

\nwenddocs{}\nwbegincode{18}\sublabel{NW2gPxqo-3IGZXZ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW2gPxqo-3IGZXZ-1}}}\moddef{Define the bigger function~{\nwtagstyle{}\subpageref{NW2gPxqo-3IGZXZ-1}}}\endmoddef\nwstartdeflinemarkup\nwusesondefline{\\{NW2gPxqo-4LQmoZ-1}}\nwenddeflinemarkup
(defun bigger ()
  \LA{}Set *small* to one greater than the last guess~{\nwtagstyle{}\subpageref{NW2gPxqo-2isJE2-1}}\RA{}
  \LA{}Have the computer guess a number~{\nwtagstyle{}\subpageref{NW2gPxqo-2K5nJA-1}}\RA{})
\nwused{\\{NW2gPxqo-4LQmoZ-1}}\nwendcode{}\nwbegindocs{19}\nwdocspar

\nwenddocs{}\nwbegincode{20}\sublabel{NW2gPxqo-2isJE2-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW2gPxqo-2isJE2-1}}}\moddef{Set *small* to one greater than the last guess~{\nwtagstyle{}\subpageref{NW2gPxqo-2isJE2-1}}}\endmoddef\nwstartdeflinemarkup\nwusesondefline{\\{NW2gPxqo-3IGZXZ-1}}\nwenddeflinemarkup
(setq *small* \LA{}Add one to the most recent guess~{\nwtagstyle{}\subpageref{NW2gPxqo-1uzkcU-1}}\RA{})
\nwused{\\{NW2gPxqo-3IGZXZ-1}}\nwendcode{}\nwbegindocs{21}\nwdocspar

\nwenddocs{}\nwbegincode{22}\sublabel{NW2gPxqo-1uzkcU-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW2gPxqo-1uzkcU-1}}}\moddef{Add one to the most recent guess~{\nwtagstyle{}\subpageref{NW2gPxqo-1uzkcU-1}}}\endmoddef\nwstartdeflinemarkup\nwusesondefline{\\{NW2gPxqo-2isJE2-1}}\nwenddeflinemarkup
(1+ \LA{}Have the computer guess a number~{\nwtagstyle{}\subpageref{NW2gPxqo-2K5nJA-1}}\RA{})
\nwused{\\{NW2gPxqo-2isJE2-1}}\nwendcode{}\nwbegindocs{23}\nwdocspar

\section{Defining the Start-Over Function}

\nwenddocs{}\nwbegincode{24}\sublabel{NW2gPxqo-4DZzHV-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW2gPxqo-4DZzHV-1}}}\moddef{Define the start-over function~{\nwtagstyle{}\subpageref{NW2gPxqo-4DZzHV-1}}}\endmoddef\nwstartdeflinemarkup\nwusesondefline{\\{NW2gPxqo-4LQmoZ-1}}\nwenddeflinemarkup
(defun start-over ()
  <<(Re)set the global state>
  \LA{}Have the computer guess a number~{\nwtagstyle{}\subpageref{NW2gPxqo-2K5nJA-1}}\RA{})
\nwused{\\{NW2gPxqo-4LQmoZ-1}}\nwendcode{}

\nwixlogsorted{c}{{(Re)set the global state}{NW2gPxqo-355GfG-1}{\nwixu{NW2gPxqo-4LQmoZ-1}\nwixd{NW2gPxqo-355GfG-1}}}%
\nwixlogsorted{c}{{Add one to the most recent guess}{NW2gPxqo-1uzkcU-1}{\nwixu{NW2gPxqo-2isJE2-1}\nwixd{NW2gPxqo-1uzkcU-1}}}%
\nwixlogsorted{c}{{Define the bigger function}{NW2gPxqo-3IGZXZ-1}{\nwixu{NW2gPxqo-4LQmoZ-1}\nwixd{NW2gPxqo-3IGZXZ-1}}}%
\nwixlogsorted{c}{{Define the guess-my-number function}{NW2gPxqo-2dH98J-1}{\nwixu{NW2gPxqo-4LQmoZ-1}\nwixd{NW2gPxqo-2dH98J-1}}}%
\nwixlogsorted{c}{{Define the smaller function}{NW2gPxqo-XVmzj-1}{\nwixu{NW2gPxqo-4LQmoZ-1}\nwixd{NW2gPxqo-XVmzj-1}}}%
\nwixlogsorted{c}{{Define the start-over function}{NW2gPxqo-4DZzHV-1}{\nwixu{NW2gPxqo-4LQmoZ-1}\nwixd{NW2gPxqo-4DZzHV-1}}}%
\nwixlogsorted{c}{{guess}{NW2gPxqo-4LQmoZ-1}{\nwixd{NW2gPxqo-4LQmoZ-1}}}%
\nwixlogsorted{c}{{Halve the sum of the limits and shorten the result}{NW2gPxqo-3A9QGg-1}{\nwixu{NW2gPxqo-2dH98J-1}\nwixd{NW2gPxqo-3A9QGg-1}}}%
\nwixlogsorted{c}{{Have the computer guess a number}{NW2gPxqo-2K5nJA-1}{\nwixd{NW2gPxqo-2K5nJA-1}\nwixu{NW2gPxqo-XVmzj-1}\nwixu{NW2gPxqo-5JtNW-1}\nwixu{NW2gPxqo-3IGZXZ-1}\nwixu{NW2gPxqo-1uzkcU-1}\nwixu{NW2gPxqo-4DZzHV-1}}}%
\nwixlogsorted{c}{{Set *big* to one less than the last guess}{NW2gPxqo-1mRqYq-1}{\nwixu{NW2gPxqo-XVmzj-1}\nwixd{NW2gPxqo-1mRqYq-1}}}%
\nwixlogsorted{c}{{Set *small* to one greater than the last guess}{NW2gPxqo-2isJE2-1}{\nwixu{NW2gPxqo-3IGZXZ-1}\nwixd{NW2gPxqo-2isJE2-1}}}%
\nwixlogsorted{c}{{Subtract one from the most recent guess}{NW2gPxqo-5JtNW-1}{\nwixu{NW2gPxqo-1mRqYq-1}\nwixd{NW2gPxqo-5JtNW-1}}}%
\nwbegindocs{25}\nwdocspar

\section{Chunks}
\nowebchunks

\section{Index}
\nowebindex

\bibliography{fav1}
\bibliographystyle{plainnat}

\end{document}
\nwenddocs{}
